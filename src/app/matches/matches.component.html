<div class="container">
  <div class="search-and-filter">

    <input *ngIf="urlActual != 'http://localhost:4200/home'" class="search" type="text"
           [(ngModel)]="inputMatch" (input)="search()"
           placeholder="Search {{competition}} matches">

    <input *ngIf="urlActual == 'http://localhost:4200/home'" class="search" type="text"
           [(ngModel)]="inputMatch" (input)="search()"
           placeholder="Search all matches">

    <div class="filter">
      <mat-button-toggle-group [(ngModel)]="selectedFilters" multiple>
        <mat-button-toggle value="filterWeeks">{{ getButtonText(selectedWeek) }}</mat-button-toggle>
        <mat-button-toggle value="filterToday">Today</mat-button-toggle>
        <mat-button-toggle value="filterLive">Live</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>

  <div *ngIf="searchMatches.length > 0">
    <form class="listMatchesContainer" [formGroup]="form">
      <p class="label">Search Results</p>
      <div *ngFor="let match of searchMatches" class="match-container">
        <app-match [match]="match" (oddsButtonClick)="handleButtonClick($event)"></app-match>
      </div>
    </form>
  </div>

  <div class="label-and-matches" *ngIf="searchMatches.length == 0">
    <div *ngIf="liveMatches.length > 0 && selectedFilters.includes('filterLive')">
      <div class="label" style="justify-content: center">
        <button mat-button disabled style="color:#07d904">
          <mat-icon>live_tv</mat-icon>
          <span style="font-weight: bolder; font-size: 1.1rem;"> Live </span>
        </button>
      </div>
      <form class="listMatchesContainer" [formGroup]="form">
        <div *ngFor="let match of liveMatches" class="match-container">
          <app-live-match [match]="match" (oddsButtonClick)="handleButtonClick($event)"></app-live-match>
        </div>
      </form>
    </div>

    <div class="label-and-matches" *ngIf="todayMatches.length > 0 && selectedFilters.includes('filterToday')">
      <div class="label" style="justify-content: center">
        <button mat-button disabled style="color:#07d904">
          <mat-icon>today</mat-icon>
          <span style="font-weight: bolder; font-size: 1.1rem;"> Today </span>
        </button>
      </div>
      <form class="listMatchesContainer" [formGroup]="form">
        <div *ngFor="let match of todayMatches" class="match-container">
          <app-match [match]="match" (oddsButtonClick)="handleButtonClick($event)"></app-match>
        </div>
      </form>
    </div>

    <div class="label-and-matches" *ngIf="selectedWeek !== undefined && selectedFilters.includes('filterWeeks')">
      <div class="label">
        <button mat-button style="color:#07d904" (click)="prevWeek(selectedWeek - 1)">
          <mat-icon class="arrow">arrow_back</mat-icon>
          <span style="font-weight: bolder; font-size: 1.1rem;">Prev</span>
        </button>
        <button mat-button disabled style="color:#07d904">
          <mat-icon>calendar_today</mat-icon>
          <span style="font-weight: bolder; font-size: 1.1rem;"> {{ getButtonText(selectedWeek) }} </span>
        </button>
        <button mat-button style="color:#07d904" (click)="nextWeek(selectedWeek + 1)">
          <span style="font-weight: bolder; font-size: 1.1rem;">Next</span>
          <mat-icon iconPositionEnd class="arrow">arrow_forward</mat-icon>
        </button>
      </div>

      <form class="listMatchesContainer" [formGroup]="form">
        <div *ngFor="let match of paginatedWeekMatches" class="match-container">
          <app-match [match]="match" (oddsButtonClick)="handleButtonClick($event)"></app-match>
        </div>
      </form>

      <mat-paginator
        [pageSize]="pageSize"
        [showFirstLastButtons]=true
        [pageSizeOptions]="pageSizeOptions"
        [length]="weekMatches[selectedWeek].length"
        (page)="pageChanged($event)"
        #paginator
      ></mat-paginator>
    </div>
  </div>
</div>
